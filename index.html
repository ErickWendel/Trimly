<!--
  Copyright 2024 Google LLC
  SPDX-License-Identifier: Apache-2.0
 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âœ¨</text></svg>">
  <title>3D Model Viewer</title>
  <script>
    if (!isSecureContext) location.protocol = "https:";
  </script>
  <!-- Import Three.js explicitly -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r132/three.min.js"></script>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <style>
    #controls {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 8px;
      z-index: 1000;
      color: white;
    }

    select,
    button {
      margin: 5px;
      padding: 8px;
      border-radius: 4px;
    }

    /* Loading Screen */
    #loading-screen {
      position: fixed;
      inset: 0;
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .loading-text {
      color: #fff;
      font-size: 24px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }
  </style>
</head>

<body>
  <!-- Custom Loading Screen -->
  <!-- <div id="loading-screen">
    <div class="loading-text">Loading 3D Model...</div>
  </div>
   -->
  <div id="controls">
    <select id="animationSelect">
      <option value="">Select Animation</option>
    </select>
    <button id="playAnimation">Play</button>
  </div>

  <a-scene vr-mode-ui="enabled: true">
    <a-assets>
      <!-- Keep the model path as is since that's where it's located -->
      <a-asset-item id="skeleton-model" src="3d/skeleton.glb"></a-asset-item>
      <a-asset-item id="cemetery-model" src="3d/cemetery.glb"></a-asset-item>
      <a-asset-item id="alphabet-model" src="3d/alphabet.glb"></a-asset-item>
    </a-assets>

    <!-- Environment -->
    <a-sky src="./3d/aurora-4k.jpg" rotation="0 -90 0"></a-sky>

    <!-- Lighting -->
    <a-light type="ambient" intensity="0.5"></a-light>
    <a-light type="directional" position="1 1 1" intensity="0.6"></a-light>

    <!-- Camera -->
    <a-entity >
      <a-camera look-controls wasd-controls></a-camera>
    </a-entity>

    <!-- 3D Model -->
    <a-entity 
      id="model" 
      position="0 0.449 -3" 
      rotation="0 0 0" 
      scale="1 1 1"
      gltf-model="#skeleton-model"

      character-animation-controller>
    </a-entity>
    <a-entity 
      id="model" 
      position="0 0.174 -8.259" 
      rotation="0 -77.043 0" 
      scale="1 1 1"
      gltf-model="#cemetery-model">
    </a-entity>
  </a-scene>

  <script src="src/index.js" type="module"></script>
</body>

</html>